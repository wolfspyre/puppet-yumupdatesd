<% comments         = scope.lookupvar('yumupdatesd::comments')
   dbus_listener    = scope.lookupvar('yumupdatesd::dbus_listener')
   do_download      = scope.lookupvar('yumupdatesd::do_download')
   do_download_deps = scope.lookupvar('yumupdatesd::do_download_deps')
   do_update        = scope.lookupvar('yumupdatesd::do_update')
   email_to         = scope.lookupvar('yumupdatesd::email_to')
   emit_via         = scope.lookupvar('yumupdatesd::emit_via')
   run_interval     = scope.lookupvar('yumupdatesd::run_interval')
   smtp_server      = scope.lookupvar('yumupdatesd::smtp_server')
   syslog_facility  = scope.lookupvar('yumupdatesd::syslog_facility')
   syslog_level     = scope.lookupvar('yumupdatesd::syslog_level')
   update_refresh   = scope.lookupvar('yumupdatesd::update_refresh')
-%>
#This file automatically generated by puppet for <%=fqdn-%>.
#Manual changes will be overwritten.
[main]
<%if comments -%>
# automatically install updates
<%end-%>
do_update = <%if do_update -%>yes<%else-%>no<%end%>
<%if comments -%>
# automatically download updates
<%end-%>
do_download = <%if do_download -%>yes<%else-%>no<%end%>
<%if comments -%>
# automatically download deps of updates
<%end-%>
do_download_deps = <%if do_download_deps -%>yes<%else-%>no<%end%>
<%if comments -%>
# how often to check for new updates (in seconds)
<%end-%>
run_interval = <%=run_interval%>
<%if comments -%>
# how often to allow checking on request (in seconds)
<%end-%>
updaterefresh = <%=update_refresh%>
<%if comments -%>
# how to send notifications (valid: dbus, email, syslog)
<%end-%>
emit_via = <%=emit_via%>
<%if emit_via == 'dbus'-%>
<%  if comments -%>
# DBUS Options
# should we listen via dbus to give out update information/check for
# new updates
<%  end-%>
dbus_listener = <%if dbus_listener -%>yes<%else-%>no<%end%>
<%elsif emit_via == 'email'-%>
<%  if comments -%>
# EMAIL Options
# Who to email (email_to)
# Who from (email_from)
# via? (smtp_server)
email_from  = <%=email_from%>
email_to    = <%=email_to%>
smtp_server = <%=smtp_server%>
<%  end -%>
<%elsif emit_via == 'syslog'%>
<%  if comments -%>
# SYSLOG Options
# Facility
# Level
<%  end -%>
syslog_facility = <%=syslog_facility%>
syslog_level    = <%=syslog_level%>
<% else -%>
#Something is very wrong. I'm expecting to send notifications via dbus, email or syslog.
<%  if comments -%>
#Emit_via aught be one of the above options... and yet, here we are in this else statement. Hmm.
<%  end -%>
<%end-%>